{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","services/gallery-api.js","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Loader/Loader.jsx","components/ErrorQuery/error.jpg","components/ErrorQuery/ErrorQuery.jsx","components/Button/Button.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","s","this","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","Component","defaultProps","api","fetchGallery","nextQuery","pageNumber","fetch","then","response","json","gallery","hits","length","Promise","reject","Error","ImageGalleryItem","item","id","webformatURL","largeImageURL","onClick","Item","src","alt","LoaderItem","Loader","color","height","width","timeout","radius","secondaryColor","ErrorQuery","message","role","errorImage","Button","allyProps","Status","ImageGallery","status","getActiveImageURL","imageURL","getImageURL","loadMoreImages","prevProps","prevState","prevQuery","galleryAPI","catch","newGallery","map","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","activeImageURL","handleFormSubmit","toggleModal","style","maxWidth","margin","padding","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a7ca8016.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Item\":\"ImageGalleryItem_Item__2vHLY\",\"Item-image\":\"ImageGalleryItem_Item-image__3htoN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3WTHH\",\"Modal\":\"Modal_Modal__29Yg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"App_App-header__d1bS1\",\"App-link\":\"App_App-link__2Jbp8\",\"App\":\"App_App__2r53v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1hKgz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__hvJ8D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3jHCm\"};","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleQueryChange = event => {\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Input query.');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button_label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleQueryChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n\nSearchbar.defaultProps = {\n  onSubmit: () => null,\n};\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","const API_KEY = '23458770-c93bd78e83fb2002196f13d31';\n\nfunction fetchGallery(nextQuery, pageNumber) {\n  return fetch(\n    `https://pixabay.com/api/?q=${nextQuery}&page=${pageNumber}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  )\n    .then(response => response.json())\n    .then(gallery => {\n      if (gallery.hits.length === 0) {\n        return Promise.reject(new Error(`Nothing to show for: ${nextQuery}`));\n      }\n      return gallery.hits;\n    });\n}\n\nconst api = {\n  fetchGallery,\n};\n\nexport default api;\n","import React from 'react';\nimport s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  item: { id, webformatURL, largeImageURL },\n  onClick,\n}) {\n  return (\n    <li className={s.Item}>\n      <img\n        src={webformatURL}\n        alt=\"\"\n        className={s['Item-image']}\n        id={id}\n        onClick={() => onClick(largeImageURL)}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.defaultProps = {\n  onClick: () => null,\n};\n\nImageGalleryItem.propTypes = {\n  onClick: PropTypes.func,\n  item: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    webformatURL: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n  }),\n};\n","import React, { Component } from 'react';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nexport default class LoaderItem extends Component {\n  //other logic\n  render() {\n    return (\n      <Loader\n        className={s.Loader}\n        type=\"MutatingDots\"\n        color=\"#6ef8d6\"\n        height={100}\n        width={100}\n        timeout={2000} //3 secs\n        radius={20}\n        secondaryColor=\"#1262a8\"\n      />\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/error.7d86105a.jpg\";","import errorImage from './error.jpg';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function ErrorQuery({ message }) {\n  return (\n    <div role=\"alert\">\n      <img src={errorImage} width=\"240\" alt=\"sadcat\" />\n      <p>{message}</p>\n    </div>\n  );\n}\n\nErrorQuery.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick, ...allyProps }) => (\n  <button type=\"button\" className={s.Button} onClick={onClick} {...allyProps}>\n    Load more\n  </button>\n);\n\nButton.defaultProps = {\n  onClick: () => null,\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  'aria-label': PropTypes.string.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport galleryAPI from '../../services/gallery-api';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Loader from '../Loader';\nimport ErrorQuery from '../ErrorQuery';\nimport Button from '../Button';\nimport PropTypes from 'prop-types';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default class ImageGallery extends Component {\n  state = {\n    gallery: null,\n    error: null,\n    status: Status.IDLE,\n    pageNumber: 1,\n    // activeImageURL: null\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevProps.query;\n    const nextQuery = this.props.query;\n    const { pageNumber } = this.state;\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ status: Status.PENDING, pageNumber: 1 });\n      // setTimeout(() => {\n      galleryAPI\n        .fetchGallery(nextQuery, 1)\n        .then(gallery => {\n          this.setState({ gallery, status: Status.RESOLVED });\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n      // }, 1500);\n    }\n\n    if (prevState.pageNumber !== pageNumber && pageNumber !== 1) {\n      galleryAPI\n        .fetchGallery(nextQuery, pageNumber)\n        .then(newGallery => {\n          this.setState(({ gallery }) => ({\n            gallery: [...gallery, ...newGallery],\n            status: Status.RESOLVED,\n          }));\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }\n  }\n\n  getActiveImageURL = imageURL => {\n    // this.setState({ activeImageURL: imageURL });\n    this.props.getImageURL(imageURL);\n  };\n\n  loadMoreImages = () => {\n    this.setState(({ pageNumber }) => ({ pageNumber: pageNumber + 1 }));\n  };\n\n  render() {\n    const { gallery, status, error } = this.state;\n\n    if (status === 'idle') {\n      return <div>Input query.</div>;\n    }\n\n    if (status === 'pending') {\n      return <Loader />;\n    }\n\n    if (status === 'rejected') {\n      return <ErrorQuery message={error.message} />;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className={s.ImageGallery}>\n            {gallery.map(item => (\n              <ImageGalleryItem\n                item={item}\n                key={item.id}\n                onClick={this.getActiveImageURL}\n              />\n            ))}\n          </ul>\n\n          <Button onClick={this.loadMoreImages} aria-label=\"Load more images\" />\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  query: PropTypes.string.isRequired,\n  getImageURL: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.defaultProps = {\n  onClose: () => null,\n};\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  imageURL: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n","import s from './App.module.css';\nimport { Component } from 'react';\nimport Searchbar from './components/Searchbar';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\n\nclass App extends Component {\n  state = {\n    query: '',\n    activeImageURL: null,\n  };\n\n  handleFormSubmit = query => {\n    this.setState({ query });\n  };\n\n  getActiveImageURL = imageURL => {\n    this.setState({ activeImageURL: imageURL });\n  };\n\n  toggleModal = () => {\n    this.setState({ activeImageURL: null });\n  };\n\n  render() {\n    const { activeImageURL, query } = this.state;\n\n    return (\n      <div\n        className={s.App}\n        style={{ maxWidth: 1170, margin: '0 auto', padding: 20 }}\n      >\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          query={this.state.query}\n          getImageURL={this.getActiveImageURL}\n        />\n        {activeImageURL && (\n          <Modal onClose={this.toggleModal} imageURL={activeImageURL}>\n            <img src={activeImageURL} alt={query} />\n          </Modal>\n        )}\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2krjG\",\"SearchForm\":\"Searchbar_SearchForm__12ogt\",\"SearchForm_button\":\"Searchbar_SearchForm_button__2fCU5\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__1g5IX\",\"SearchForm_input\":\"Searchbar_SearchForm_input__36bE7\"};"],"sourceRoot":""}